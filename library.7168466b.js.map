{"mappings":"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","sources":["src/js/libraryMarkup.js","src/js/libraryModal.js","src/library.js"],"sourcesContent":["import apiservice from './apiService';\nimport { btnWatched, btnQueue, libraryData } from './refs';\nimport { renderMarkupSearch } from './markupSearch';\nimport { openModalMovie } from './refs';\n\n// const apiservice = new apiservice();\n\nconst paginationList = document.querySelector('.pagination__list');\nconst paginationBox = document.querySelector('.pagination');\n\nlet totalPages;\nlet libBlockToShow;\n\nbtnWatched.addEventListener('click', onBtnWatchedClick);\nbtnQueue.addEventListener('click', onBtnQueueClick);\n\nonBtnWatchedClick();\n\nexport function onBtnWatchedClick() {\n  paginationList.innerHTML = '';\n  apiservice.resetPage();\n  btnWatched.classList.add('btnIsActive');\n  btnQueue.classList.remove('btnIsActive');\n  localStorage.setItem('sourceForModal', 'watchedFilms');\n  libBlockToShow = 'watched';\n  libraryListRender();\n}\n\nfunction onBtnQueueClick() {\n  paginationList.innerHTML = '';\n  apiservice.resetPage();\n  btnWatched.classList.remove('btnIsActive');\n  btnQueue.classList.add('btnIsActive');\n  localStorage.setItem('sourceForModal', 'queuedFilms');\n  libBlockToShow = 'queue';\n  libraryListRender();\n}\n\nlet curentPageToRender;\n\nexport function libraryListRender(curentPage, totalPage) {\n  let curentPageToRender = curentPage || apiservice.page;\n  let totalPages = totalPage || 1;\n  let watchedList;\n\n  try {\n    if (libBlockToShow === 'watched') {\n      watchedList = localStorage.getItem('watchedFilms'); //watchedFilms\n    } else {\n      watchedList = localStorage.getItem('queuedFilms');\n    }\n  } catch (err) {\n    console.log(err);\n  }\n\n  libraryData.innerHTML = '';\n\n  try {\n    if (watchedList && watchedList !== '[]') {\n      let watchedListToRender;\n\n      if (libBlockToShow === 'watched') {\n        watchedListToRender = JSON.parse(watchedList);\n      } else {\n        watchedListToRender = JSON.parse(watchedList);\n      }\n\n      const screenWidth = window.screen.width;\n\n      let array_size;\n\n      if (screenWidth < 767) {\n        array_size = 4;\n      } else if (screenWidth > 767 && screenWidth < 1280) {\n        array_size = 8;\n      } else {\n        array_size = 9;\n      }\n\n      if (watchedListToRender.length > array_size) {\n        const sliced_array = [];\n        for (let i = 0; i < watchedListToRender.length; i += array_size) {\n          sliced_array.push(watchedListToRender.slice(i, i + array_size));\n        }\n\n        totalPages = sliced_array.length;\n        librPagination(curentPageToRender, totalPages);\n\n        try {\n          const newMurkup = renderMarkupSearch(\n            sliced_array[curentPageToRender - 1]\n          );\n          libraryData.innerHTML = `<ul class=\"library__list js-library-list\">${newMurkup}</ul>`;\n        } catch (err) {\n          console.log(err);\n        }\n      } else {\n        const newMurkup = renderMarkupSearch(watchedListToRender);\n        paginationList.innerHTML = '';\n        apiservice.page = 1;\n        curentPageToRender = 1;\n        libraryData.innerHTML = `<ul class=\"library__list js-library-list\">${newMurkup}</ul>`;\n      }\n    } else {\n      libraryData.innerHTML = `<div class=\"no-data\">\n      <p>\n        It's empty here now\n      </p>\n      <a class=\"no-data-btn\" href=\"./index.html\">Let's fix it</a>\n    </div>`;\n    }\n  } catch (err) {\n    console.log(err);\n  }\n}\n\n// ..........................................................\n\nfunction librPagination(curentPageToRender, totalPage) {\n  totalPages = totalPage;\n\n  let murkup = '';\n\n  let beforeTwoPage = curentPageToRender - 2;\n  let beforePage = curentPageToRender - 1;\n  let afterPage = curentPageToRender + 1;\n  let afterTwoPage = curentPageToRender + 2;\n\n  if (curentPageToRender > 1) {\n    murkup += `<li class=\"pagination__item pagination__item_arrows\">◄</li> `;\n    murkup += `<li class=\"pagination__item\">1</li>`;\n  }\n\n  if (curentPageToRender > 4) {\n    murkup += `<li class=\"pagination__item three-drops\">...</li>`;\n  }\n\n  if (curentPageToRender > 3) {\n    murkup += `<li class=\"pagination__item\">${beforeTwoPage}</li>`;\n  }\n\n  if (curentPageToRender > 2) {\n    murkup += `<li class=\"pagination__item\">${beforePage}</li>`;\n  }\n\n  murkup += `<li class=\"pagination__item current\">${curentPageToRender}</li>`;\n\n  if (totalPages - 1 > curentPageToRender) {\n    murkup += `<li class=\"pagination__item\">${afterPage}</li>`;\n  }\n\n  if (totalPages - 2 > curentPageToRender) {\n    murkup += `<li class=\"pagination__item\">${afterTwoPage}</li>`;\n  }\n\n  if (totalPages - 3 > curentPageToRender) {\n    murkup += `<li class=\"pagination__item three-drops\">...</li>`;\n  }\n\n  if (totalPages > curentPageToRender) {\n    murkup += `<li class=\"pagination__item\">${totalPages}</li>`;\n    murkup += `<li class=\"pagination__item pagination__item_arrows\">►</li>`;\n  }\n\n  paginationList.innerHTML = murkup;\n  window.scrollBy(0, -10000);\n  // window.scrollBy(0, -window.pageYOffset + 270);\n}\n\n// const clickToSckroll = document.querySelector('.pagination__item');\n// clickToSckroll.addEventListener('click', up);\n\n// document.getElementById(IDelemen).onclick = up();\n\n// {/* <a href=\"#\" onclick=\"return up()\">наверх</a> */}\n\n//////////////////плавна прокрутка\n\n\n\n// ..........................................................\n\npaginationBox.addEventListener('click', onLibrPaginationClick);\n\nfunction onLibrPaginationClick(e) {\n  // up();\n  if (e.target.tagName !== 'LI') {\n    return;\n  }\n  if (e.target.textContent === '...') {\n    return;\n  }\n\n  if (e.target.textContent === '►') {\n    curentPageToRender += 1;\n    libraryListRender(curentPageToRender, totalPages);\n    apiservice.page = curentPageToRender;\n    return;\n  }\n\n  if (e.target.textContent === '◄') {\n    curentPageToRender -= 1;\n    libraryListRender(curentPageToRender, totalPages);\n    apiservice.page = curentPageToRender;\n    return;\n  }\n\n  if (true) {\n    curentPageToRender = Number(e.target.textContent);\n    libraryListRender(curentPageToRender, totalPages);\n    apiservice.page = curentPageToRender;\n  }\n}\n","import { renderMarkupModal } from './markupModal';\n// import { cleanHtml } from \"./markupSearch\";   --- 69 - імпорт одноіменної функції\nimport { modalGallery } from './refs';\n\nimport { openModalMovie } from './refs';\nimport { closeModalMovieBtn } from './refs';\nimport { libraryListRender } from './libraryMarkup';\n// import { onBtnWatchedClick } from './libraryMarkup';\n\n\nconst libraryModalClick = document.querySelector('.js-library-data');\n\nlibraryModalClick.addEventListener('click', oneToggle);\ncloseModalMovieBtn.addEventListener('click', closeBtn);\nopenModalMovie.addEventListener('click', clickBackdropCloseTeamModal);\n\nexport function oneToggle(evt) {\n  // console.log('oneToggle: ');\n\n  /////////////////////////////////перевірка, якщо пустий список - модалка не відкривається\n  // console.log(evt.target);\n  // console.log(evt.target.classList);\n  if (\n    !evt.target.closest('.movie__item')\n    // evt.target.closest('.no-data') ||\n    // !evt.target.closest('.movie__item') ///movie__item    evt.target.classList.contains.contains('library__list')\n  ) {\n    // console.log('не запускаємо модалку');\n    return;\n  }\n\n  try {\n    openModalMovie.classList.toggle('is-hidden');\n    window.addEventListener('keydown', keyPressEscCloseMovieModal);\n    if (openModalMovie.classList.contains('is-hidden')) {\n      window.removeEventListener('keydown', keyPressEscCloseMovieModal);\n    }\n\n    let localArray;\n    const sourceForModal = localStorage.getItem('sourceForModal');\n    // console.log('sourceForModal: ', sourceForModal);\n    /////////////////  вибір джерела даних залежно від того, де відкрита модалка\n    if (sourceForModal === 'watchedFilms') {\n      const localMovie = JSON.parse(localStorage.getItem('watchedFilms'));\n      localArray = localMovie;\n    }\n    if (sourceForModal === 'queuedFilms') {\n      const localMovie = JSON.parse(localStorage.getItem('queuedFilms'));\n      localArray = localMovie;\n    }\n\n    // const localMovie = JSON.parse(localStorage.getItem('currentFilms'));\n    // // console.log();\n    // const localArray = localMovie.data.results;\n    // console.log(localArray);\n    const li = evt.target.closest('.movie__item');\n    const liId = li.dataset.movie;\n    // console.log(liId);\n\n    cleanHtml();\n    const arrId = localArray.find(arr => arr.id == liId);\n    // console.log(arrId);\n    if (arrId == undefined) {\n      //  console.log(localArray);\n    } else\n      modalGallery.insertAdjacentHTML('beforeend', renderMarkupModal(arrId));\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nexport function clickBackdropCloseTeamModal(e) {\n  if (e.target === e.currentTarget) {\n    openModalMovie.classList.toggle('is-hidden');\n    libraryListRender();\n  }\n}\n\nexport function keyPressEscCloseMovieModal(evt) {\n  const ESC_KEY_CODE = `Escape`;\n\n  if (evt.code === ESC_KEY_CODE) {\n    window.removeEventListener('keydown', keyPressEscCloseMovieModal);\n\n    openModalMovie.classList.toggle('is-hidden');\n    libraryListRender();\n  }\n}\n\nexport function closeBtn() {\n  // openModalMovie.classList.toggle('is-hidden')\n  setTimeout(\n    () => openModalMovie.classList.add('is-hidden', libraryListRender()),//\n    150\n  );\n}\n\nexport function cleanHtml() {\n  modalGallery.innerHTML = '';\n}\n","import './js/libraryMarkup';\nimport './js/libraryModal';\nimport './js/markupModal';\n\nimport { openModalMovie } from './js/refs';\nimport { onClickModal } from './js/modal-btns-library';\nopenModalMovie.addEventListener('click', onClickModal);\n\n/// ////////////footer-modal\nimport { openModalTeamBtn, closeModalTeamBtn, modalTeam } from './js/refs';\nimport {\n  // toggleTeamModal,\n  toggleTeamModal,\n  clickBackdropCloseTeamModal,\n} from './js/team-modal';\n\nopenModalTeamBtn.addEventListener('click', toggleTeamModal);\ncloseModalTeamBtn.addEventListener('click', toggleTeamModal);\nmodalTeam.addEventListener('click', clickBackdropCloseTeamModal);\n//////////////// footer-modal\n\nimport { modalGallery } from './js/refs';\nimport { onBtnTrailer } from './js/trailer';\nimport { cleanHtmlTrailer } from './js/trailer';\nmodalGallery.addEventListener('click', onBtnTrailer);\n\n// import { modalGallery } from './js/refs';\n// modalGallery.addEventListener('click', onBtnTrailer);\n\nimport { clicksMovie } from './js/refs';\n// import { openModalMovie } from './js/refs';\n// import { closeModalMovieBtn } from './js/refs';\n// import {\n//   oneToggle,\n//   keyPressEscCloseMovieModal,\n//   closeBtn,\n// } from './js/modal-movie';\n// clicksMovie.addEventListener('click', oneToggle);\n// closeModalMovieBtn.addEventListener('click', closeBtn);\n// // openModalMovie.addEventListener('click', clickBackdropCloseTeamModal);\n// import { libraryData } from './js/refs';\n// libraryData.addEventListener('click', oneToggle);\n// closeModalMovieBtn.addEventListener('click', closeBtn);\n// openModalMovie.addEventListener('click', clickBackdropCloseTeamModal);\n"],"names":["$80c1fb273848d079$var$totalPages","$80c1fb273848d079$var$libBlockToShow","$80c1fb273848d079$var$curentPageToRender","$dh4R1","parcelRequire","$80c1fb273848d079$var$paginationList","document","querySelector","$80c1fb273848d079$var$paginationBox","$80c1fb273848d079$export$e3cd2a9e9061f2c1","innerHTML","default","resetPage","$4Nugj","btnWatched","classList","add","btnQueue","remove","localStorage","setItem","$80c1fb273848d079$export$b823fea0631e0b3b","curentPage","totalPage","watchedList","curentPageToRender1","page","getItem","err","console","log","libraryData","watchedListToRender","JSON","parse","array_size","screenWidth","window","screen","width","length","sliced_array","i","push","slice","curentPageToRender2","murkup","beforeTwoPage","beforePage","afterPage","afterTwoPage","concat","scrollBy","$80c1fb273848d079$var$librPagination","newMurkup","$hnyF1","renderMarkupSearch","newMurkup1","err1","addEventListener","e","target","tagName","textContent","Number","$jeWR1","$c0832a3ae1aa9857$export$1adc870ebaa2167","evt","code","removeEventListener","openModalMovie","toggle","closest","localArray","contains","sourceForModal","localMovie","localMovie1","liId","dataset","movie","modalGallery","arrId","find","arr","id","undefined","insertAdjacentHTML","renderMarkupModal","closeModalMovieBtn","setTimeout","currentTarget","$kpmfB","onClickModal","openModalTeamBtn","$ghnK3","toggleTeamModal","closeModalTeamBtn","modalTeam","clickBackdropCloseTeamModal","$cDXQO","onBtnTrailer"],"version":3,"file":"library.7168466b.js.map"}
{"mappings":"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","sources":["src/js/libraryMarkup.js","src/js/libraryModal.js","src/library.js"],"sourcesContent":["import apiservice from './apiService';\nimport { btnWatched, btnQueue, libraryData } from './refs';\nimport { renderMarkupSearch } from './markupSearch';\nimport { openModalMovie } from './refs';\n\n// const apiservice = new apiservice();\n\nconst paginationList = document.querySelector('.pagination__list');\nconst paginationBox = document.querySelector('.pagination');\n\nlet totalPages;\nlet libBlockToShow;\n\nbtnWatched.addEventListener('click', onBtnWatchedClick);\nbtnQueue.addEventListener('click', onBtnQueueClick);\n\nonBtnWatchedClick();\n\nexport function onBtnWatchedClick() {\n  paginationList.innerHTML = '';\n  apiservice.resetPage();\n  btnWatched.classList.add('btnIsActive');\n  btnQueue.classList.remove('btnIsActive');\n  localStorage.setItem('sourceForModal', 'watchedFilms');\n  libBlockToShow = 'watched';\n  libraryListRender();\n}\n\nfunction onBtnQueueClick() {\n  paginationList.innerHTML = '';\n  apiservice.resetPage();\n  btnWatched.classList.remove('btnIsActive');\n  btnQueue.classList.add('btnIsActive');\n  localStorage.setItem('sourceForModal', 'queuedFilms');\n  libBlockToShow = 'queue';\n  libraryListRender();\n}\n\nlet curentPageToRender;\n\nexport function libraryListRender(curentPage, totalPage) {\n  let curentPageToRender = curentPage || apiservice.page;\n  let totalPages = totalPage || 1;\n  let watchedList;\n\n  try {\n    if (libBlockToShow === 'watched') {\n      watchedList = localStorage.getItem('watchedFilms'); //watchedFilms\n    } else {\n      watchedList = localStorage.getItem('queuedFilms');\n    }\n  } catch (err) {\n    console.log(err);\n  }\n\n  libraryData.innerHTML = '';\n\n  try {\n    if (watchedList && watchedList !== '[]') {\n      let watchedListToRender;\n\n      if (libBlockToShow === 'watched') {\n        watchedListToRender = JSON.parse(watchedList);\n      } else {\n        watchedListToRender = JSON.parse(watchedList);\n      }\n\n      const screenWidth = window.screen.width;\n\n      let array_size;\n\n      if (screenWidth < 767) {\n        array_size = 4;\n      } else if (screenWidth > 767 && screenWidth < 1280) {\n        array_size = 8;\n      } else {\n        array_size = 9;\n      }\n\n      if (watchedListToRender.length > array_size) {\n        const sliced_array = [];\n        for (let i = 0; i < watchedListToRender.length; i += array_size) {\n          sliced_array.push(watchedListToRender.slice(i, i + array_size));\n        }\n\n        totalPages = sliced_array.length;\n        librPagination(curentPageToRender, totalPages);\n\n        try {\n          const newMurkup = renderMarkupSearch(\n            sliced_array[curentPageToRender - 1]\n          );\n          libraryData.innerHTML = `<ul class=\"library__list js-library-list\">${newMurkup}</ul>`;\n        } catch (err) {\n          console.log(err);\n        }\n      } else {\n        const newMurkup = renderMarkupSearch(watchedListToRender);\n        paginationList.innerHTML = '';\n        apiservice.page = 1;\n        curentPageToRender = 1;\n        libraryData.innerHTML = `<ul class=\"library__list js-library-list\">${newMurkup}</ul>`;\n      }\n    } else {\n      libraryData.innerHTML = `<div class=\"no-data\">\n      <p>\n        It's empty here now\n      </p>\n      <a class=\"no-data-btn\" href=\"./index.html\">Let's fix it</a>\n    </div>`;\n    }\n  } catch (err) {\n    console.log(err);\n  }\n}\n\n// ..........................................................\n\nfunction librPagination(curentPageToRender, totalPage) {\n  totalPages = totalPage;\n\n  let murkup = '';\n\n  let beforeTwoPage = curentPageToRender - 2;\n  let beforePage = curentPageToRender - 1;\n  let afterPage = curentPageToRender + 1;\n  let afterTwoPage = curentPageToRender + 2;\n\n  if (curentPageToRender > 1) {\n    murkup += `<li class=\"pagination__item pagination__item_arrows\">◄</li> `;\n    murkup += `<li class=\"pagination__item\">1</li>`;\n  }\n\n  if (curentPageToRender > 4) {\n    murkup += `<li class=\"pagination__item three-drops\">...</li>`;\n  }\n\n  if (curentPageToRender > 3) {\n    murkup += `<li class=\"pagination__item\">${beforeTwoPage}</li>`;\n  }\n\n  if (curentPageToRender > 2) {\n    murkup += `<li class=\"pagination__item\">${beforePage}</li>`;\n  }\n\n  murkup += `<li class=\"pagination__item current\">${curentPageToRender}</li>`;\n\n  if (totalPages - 1 > curentPageToRender) {\n    murkup += `<li class=\"pagination__item\">${afterPage}</li>`;\n  }\n\n  if (totalPages - 2 > curentPageToRender) {\n    murkup += `<li class=\"pagination__item\">${afterTwoPage}</li>`;\n  }\n\n  if (totalPages - 3 > curentPageToRender) {\n    murkup += `<li class=\"pagination__item three-drops\">...</li>`;\n  }\n\n  if (totalPages > curentPageToRender) {\n    murkup += `<li class=\"pagination__item\">${totalPages}</li>`;\n    murkup += `<li class=\"pagination__item pagination__item_arrows\">►</li>`;\n  }\n\n  paginationList.innerHTML = murkup;\n  window.scrollBy(0, -10000);\n  // window.scrollBy(0, -window.pageYOffset + 270);\n}\n\n// const clickToSckroll = document.querySelector('.pagination__item');\n// clickToSckroll.addEventListener('click', up);\n\n// document.getElementById(IDelemen).onclick = up();\n\n// {/* <a href=\"#\" onclick=\"return up()\">наверх</a> */}\n\n//////////////////плавна прокрутка\n\n// var t;\n// // function up() {\n//   var top = Math.max(\n//     document.body.scrollTop,\n//     document.documentElement.scrollTop\n//   );\n//   if (top > 0) {\n//     window.scrollBy(0, -100);\n//    let t = setTimeout('up()', 20);\n//   } else clearTimeout(t);\n//   // return false;\n// }\n\n// ..........................................................\n\npaginationBox.addEventListener('click', onLibrPaginationClick);\n\nfunction onLibrPaginationClick(e) {\n  // up();\n  if (e.target.tagName !== 'LI') {\n    return;\n  }\n  if (e.target.textContent === '...') {\n    return;\n  }\n\n  if (e.target.textContent === '►') {\n    curentPageToRender += 1;\n    libraryListRender(curentPageToRender, totalPages);\n    apiservice.page = curentPageToRender;\n    return;\n  }\n\n  if (e.target.textContent === '◄') {\n    curentPageToRender -= 1;\n    libraryListRender(curentPageToRender, totalPages);\n    apiservice.page = curentPageToRender;\n    return;\n  }\n\n  if (true) {\n    curentPageToRender = Number(e.target.textContent);\n    libraryListRender(curentPageToRender, totalPages);\n    apiservice.page = curentPageToRender;\n  }\n}\n","import { renderMarkupModal } from './markupModal';\n// import { cleanHtml } from \"./markupSearch\";   --- 69 - імпорт одноіменної функції\nimport { modalGallery } from './refs';\n\nimport { openModalMovie } from './refs';\nimport { closeModalMovieBtn } from './refs';\nimport { libraryListRender } from './libraryMarkup';\n// import { onBtnWatchedClick } from './libraryMarkup';\n\n\nconst libraryModalClick = document.querySelector('.js-library-data');\n\nlibraryModalClick.addEventListener('click', oneToggle);\ncloseModalMovieBtn.addEventListener('click', closeBtn);\nopenModalMovie.addEventListener('click', clickBackdropCloseTeamModal);\n\nexport function oneToggle(evt) {\n  // console.log('oneToggle: ');\n\n  /////////////////////////////////перевірка, якщо пустий список - модалка не відкривається\n  // console.log(evt.target);\n  // console.log(evt.target.classList);\n  if (\n    !evt.target.closest('.movie__item')\n    // evt.target.closest('.no-data') ||\n    // !evt.target.closest('.movie__item') ///movie__item    evt.target.classList.contains.contains('library__list')\n  ) {\n    // console.log('не запускаємо модалку');\n    return;\n  }\n\n  try {\n    openModalMovie.classList.toggle('is-hidden');\n    window.addEventListener('keydown', keyPressEscCloseMovieModal);\n    if (openModalMovie.classList.contains('is-hidden')) {\n      window.removeEventListener('keydown', keyPressEscCloseMovieModal);\n    }\n\n    let localArray;\n    const sourceForModal = localStorage.getItem('sourceForModal');\n    // console.log('sourceForModal: ', sourceForModal);\n    /////////////////  вибір джерела даних залежно від того, де відкрита модалка\n    if (sourceForModal === 'watchedFilms') {\n      const localMovie = JSON.parse(localStorage.getItem('watchedFilms'));\n      localArray = localMovie;\n    }\n    if (sourceForModal === 'queuedFilms') {\n      const localMovie = JSON.parse(localStorage.getItem('queuedFilms'));\n      localArray = localMovie;\n    }\n\n    // const localMovie = JSON.parse(localStorage.getItem('currentFilms'));\n    // // console.log();\n    // const localArray = localMovie.data.results;\n    // console.log(localArray);\n    const li = evt.target.closest('.movie__item');\n    const liId = li.dataset.movie;\n    // console.log(liId);\n\n    cleanHtml();\n    const arrId = localArray.find(arr => arr.id == liId);\n    // console.log(arrId);\n    if (arrId == undefined) {\n      //  console.log(localArray);\n    } else\n      modalGallery.insertAdjacentHTML('beforeend', renderMarkupModal(arrId));\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nexport function clickBackdropCloseTeamModal(e) {\n  if (e.target === e.currentTarget) {\n    openModalMovie.classList.toggle('is-hidden');\n    libraryListRender();\n  }\n}\n\nexport function keyPressEscCloseMovieModal(evt) {\n  const ESC_KEY_CODE = `Escape`;\n\n  if (evt.code === ESC_KEY_CODE) {\n    window.removeEventListener('keydown', keyPressEscCloseMovieModal);\n\n    openModalMovie.classList.toggle('is-hidden');\n    libraryListRender();\n  }\n}\n\nexport function closeBtn() {\n  // openModalMovie.classList.toggle('is-hidden')\n  setTimeout(\n    () => openModalMovie.classList.add('is-hidden', libraryListRender()),//\n    150\n  );\n}\n\nexport function cleanHtml() {\n  modalGallery.innerHTML = '';\n}\n","import './js/libraryMarkup';\nimport './js/libraryModal';\nimport './js/markupModal';\n\nimport { openModalMovie } from './js/refs';\nimport { onClickModal } from './js/modal-btns-library';\nopenModalMovie.addEventListener('click', onClickModal);\n\n/// ////////////footer-modal\nimport { openModalTeamBtn, closeModalTeamBtn, modalTeam } from './js/refs';\nimport {\n  // toggleTeamModal,\n  toggleTeamModal,\n  clickBackdropCloseTeamModal,\n} from './js/team-modal';\n\nopenModalTeamBtn.addEventListener('click', toggleTeamModal);\ncloseModalTeamBtn.addEventListener('click', toggleTeamModal);\nmodalTeam.addEventListener('click', clickBackdropCloseTeamModal);\n//////////////// footer-modal\n\nimport { modalGallery } from './js/refs';\nimport { onBtnTrailer } from './js/trailer';\nimport { cleanHtmlTrailer } from './js/trailer';\nmodalGallery.addEventListener('click', onBtnTrailer);\n\n// import { modalGallery } from './js/refs';\n// modalGallery.addEventListener('click', onBtnTrailer);\n\nimport { clicksMovie } from './js/refs';\n// import { openModalMovie } from './js/refs';\n// import { closeModalMovieBtn } from './js/refs';\n// import {\n//   oneToggle,\n//   keyPressEscCloseMovieModal,\n//   closeBtn,\n// } from './js/modal-movie';\n// clicksMovie.addEventListener('click', oneToggle);\n// closeModalMovieBtn.addEventListener('click', closeBtn);\n// // openModalMovie.addEventListener('click', clickBackdropCloseTeamModal);\n// import { libraryData } from './js/refs';\n// libraryData.addEventListener('click', oneToggle);\n// closeModalMovieBtn.addEventListener('click', closeBtn);\n// openModalMovie.addEventListener('click', clickBackdropCloseTeamModal);\n"],"names":["$iyB0E","parcelRequire","$5a89392a7500e643$var$paginationList","document","querySelector","$5a89392a7500e643$var$paginationBox","$5a89392a7500e643$var$totalPages","$5a89392a7500e643$var$libBlockToShow","$5a89392a7500e643$var$curentPageToRender","$5a89392a7500e643$export$e3cd2a9e9061f2c1","innerHTML","default","resetPage","$krGWQ","btnWatched","classList","add","btnQueue","remove","localStorage","setItem","$5a89392a7500e643$export$b823fea0631e0b3b","curentPage","totalPage","watchedList","curentPageToRender1","page","totalPages1","getItem","err","console","log","libraryData","watchedListToRender","JSON","parse","screenWidth","window","screen","width","array_size","length","sliced_array","i","push","slice","curentPageToRender2","murkup","beforeTwoPage","beforePage","afterPage","afterTwoPage","scrollBy","$5a89392a7500e643$var$librPagination","newMurkup","$l0vNa","renderMarkupSearch","err1","addEventListener","e","target","tagName","textContent","Number","$jwFHl","$a7452d7014976e84$export$1adc870ebaa2167","evt","code","removeEventListener","openModalMovie","toggle","closest","localArray","contains","sourceForModal","localMovie","liId","dataset","movie","modalGallery","arrId","find","arr","id","undefined","insertAdjacentHTML","renderMarkupModal","closeModalMovieBtn","setTimeout","currentTarget","$7YAZl","onClickModal","openModalTeamBtn","$baGT8","toggleTeamModal","closeModalTeamBtn","modalTeam","clickBackdropCloseTeamModal","$37v9V","onBtnTrailer"],"version":3,"file":"library.4a9ce12e.js.map"}